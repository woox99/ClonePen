{% extends 'core/base_site.html' %}

{% load static %}

{% block head_title %}
<title>Inbox - ClonePen</title>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'core/css/base_site.css' %}">
<link rel="stylesheet" href="{% static 'core/css/menu/messages.css' %}">
{% endblock %}

<!-- makes menu link icon active color -->
{% block messages-link %}
<i class="bi bi-chat-left-fill active"></i>Messages<span class="bg-warning text-black badge rounded-pill">1</span>
{% endblock %}
{% block your-work-link-offcanvas %}
<i class="bi bi-grid-fill active"></i>Your Work
{% endblock %}

<!-- main content -->
{% block main-content %}
<div id="main-content" class="main-content container-fluid p-0 d-flex">
    <div class="conversations list-group" data-bs-theme="dark">
        {% for conversation in conversations %}
        <a href="{% url 'core:chat' pk=conversation.pk %}" class="conversation list-group-item list-group-item-action d-flex" aria-current="true">
            <img class="me-3 mt-1" src="{% static 'core/assets/profile_codepen.png' %}" alt="">
            <div class="d-flex w-100 justify-content-between">
                <div>
                    <h6 class="mb-1">
                        {% for participant in conversation.participants.all %}
                        {% if participant != user %}
                        {{participant.username}}
                        {% endif %}
                        {% endfor %}
                    </h6>
                    <p class="message-content text-white fw-medium">{{conversation.last_message}}</p>
                </div>
                <small class="text-secondary">3d</i></small>
            </div>
        </a>
        {% endfor %}
        <!-- <a href="#" class="conversation list-group-item list-group-item-action d-flex" aria-current="true">
            <img class="me-3 mt-1" src="{% static 'core/assets/profile_codepen.png' %}" alt="">
            <div class="d-flex w-100 justify-content-between">
                <div>
                    <h6 class="mb-1">ClonePen</h6>
                    <p class="message-content text-white fw-medium">Welcome to ClonePen! You can message our team here
                        for support if it does thine you can just .</p>
                </div>
                <small class="text-secondary">3d</i></small>
            </div>
        </a> -->
        <a href="#" class="list-group-item list-group-item-action d-flex" aria-current="true">
            <img class="me-3 mt-1" src="{% static 'core/assets/profile_codepen.png' %}" alt="">
            <div class="d-flex w-100 justify-content-between">
                <div>
                    <h6 class="mb-1 text-body-secondary">Hyperplexed<i class="bi bi-arrow-up-right ms-1"></i></h6>
                    <p class="message-content text-secondary">Hi man, i really like your work!</p>
                </div>
                <small class="text-secondary">3d</small>
            </div>
        </a>
        <a href="#" class="list-group-item list-group-item-action d-flex" aria-current="true">
            <img class="me-3 mt-1" src="{% static 'core/assets/profile_codepen.png' %}" alt="">
            <div class="d-flex w-100 justify-content-between">
                <div>
                    <h6 class="mb-1 text-body-secondary">ClonePen</h6>
                    <p class="message-content text-secondary">Welcome to ClonePen! You can message our team here
                        for support if it does thine you can just .</p>
                </div>
                <small class="text-secondary">3d</small>
            </div>
        </a>
    </div>
    <div class="chat d-none d-lg-block">
        <div class="messages">
            {% for message in messages %}
            <div class="message text-white">
                <div class="d-flex">
                    <img class="m-2" src="{% static 'core/assets/profile_codepen.png' %}" alt="">
                    <div class="mt-2">
                        <div class="d-flex gap-2">
                            <h6 class="username m-0">{{message.sender}}</h6>
                            <small class="text-secondary">{{message.created}}</small>
                        </div>
                        <p class="content text-secondary">{{message.content}}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="chat-box">
            <form action="" class="d-flex">
                <textarea class="form-control rounded-pill" id="" rows="1" data-bs-theme="dark"
                    placeholder="Write message.."></textarea>
                <button type="submit"><i class="bi bi-send"></i></button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block footer %}{% endblock %}

{% block js %}
<script src="{% static './core/js/menu/messages.js'%}"></script>
{% endblock %}